## 01 Elastic控制台

#### 1. 查询所有

```json
# 查询所有

GET goods/_search
{
  "query": {
    "match_all": {}
  }
}
```

#### 2. match匹配所有

```json
# match匹配查询

get goods/_search
{
  "query":{
    "match": {
      "brandName": "华为"
    }
  }
}
```

#### 3. 多字段匹配查询
`multi_match_query`
```json
# multi_match_query 多字段匹配查询
# 比如: 我要查询如家 name 10 brand 20 address 30 默认取并集 A∪B
# size: 定义显示数量

GET goods/_search
{
  "query": {
    "multi_match": {
      "query": "联想",
      "fields": ["brandName","title"]
    }
  }, "size": 200
}
```

#### 4. 多字段匹配查询
`simple_query_string`
```json
# 另一种写法(老版本)
# default_operator 切换并交集

GET goods/_search
{
  "query": {
    "simple_query_string": {
      "query": "联想",
      "fields": ["brandName","title"],
      "default_operator": "AND"
    }
  }
}
```

#### 5. 根据id查询
```json
# 根据id查询

GET goods/_search
{
  "query":{
    "ids": {
      "values": ["883893","915676"]
    }
  }
}
```

####  6. term精准查询
```json
# term精准查询

GET goods/_search
{
  "query": {
    "term": {
      "brandName": {
        "value": "联想"
      }
    }
  }
}
```

#### 7. 范围查询
```json
# 范围查询

GET /goods/_search
{
  "query": {
    "range": {
      "price": {
        "gte": 10,
        "lte": 300
      }
    }
  }
}
```

#### 8. 地理查询(搜附近)
```json
# 地理查询/附近查询
# distance->距离  "location"->坐标字段名

GET /goods/_search
{
  "query": {
    "geo_distance":{
      "distance":"15km",
      "location":"31.21,121.5"
    }
  }
}
```

#### 9. 算分函数查询

```json
# 算分函数查询
# 此处详见讲义

GET /goods/_search
{
  "query": {
    "function_score": {
      "query": {
        "match": {
          "categoryName": "手机"
        }
      },
      "functions": [
        {
          "filter": {
            "term": {
              "brandName": "华为"
            }
          },
          "weight": 10
        }
      ],
      "boost_mode": "sum"
    }
  },
  "size": 200
}

```

#### 10. 多条件查询
```json
# 多条件查询 
# 需求: 名称中包含华为 并且 价格低于500

GET goods/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "match":{
            "brandName":"华为"
          }
        },
        {
          "range":{
            "price":{
            "gt":100
            }
          }
        }
      ]
    }
  }
}
```

#### 11. 多条件查询, 案例2

```json
# 需求: 名称(包含华为 并且 价格低于500) 或者 brandName="三星"

GET goods/_search
{
  "query": {
    "bool": {
      "should": [
        {
          "term": {
            "brandName": "三星"
          }
        },
        {
          "bool": {
            "must": [
              {
                "match": {
                  "title": "华为"
                }
              },
              {
                "range": {
                  "price": {
                    "gte": 500,
                    "lte": 3000
                  }
                }
              }
            ]
          }
        }
      ]
    }
  }
}
```

####  12.排序查询_分页查询
```json
# 排序查询 普通字段, keyword 数值型
# ES默认指挥查询10条记录
# ES最多只能查询10000条数据

GET /goods/_search
{
  "query": {
    "match_all": {}
  },
  "sort": [
    {
      "price": {
        "order": "desc"
      }
    }
  ],
  "from": 10,
  "size": 20
}
```

#### 13. 根据位置进行排序


#### 14. 高亮结果集

```json
# 高亮结果集
GET /goods/_search
{
  "query": {
    "match": {
      "title": "华为"
    }
  },
  "highlight": {
    "fields": {
      "brandName": {
        "pre_tags": "<em>",
        "post_tags": "</em>"
      }
    }
  }
}
```


## 02 java代码



